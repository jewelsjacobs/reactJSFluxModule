{% extends 'sign_up_base.html' %}

{% block sidebar %}
    {% call sidebar_help(hidden=False) %}
        <div class="rs-detail-section">
            <div class="rs-detail-section-header">
                <div class="rs-detail-section-title">Instance Details</div>
            </div>
            <div class="rs-detail-section-body">
                <ul class="rs-detail-list">
                    <li class="rs-detail-item">
                        <div class="rs-detail-key">Name</div>
                        <div class="rs-detail-value">{{ name }}</div>
                    </li>
                    <li class="rs-detail-item">
                        <div class="rs-detail-key">Plan</div>
                        <div class="rs-detail-value">{{ plan }}</div>
                    </li>
                    <li class="rs-detail-item">
                        <div class="rs-detail-key">Zone</div>
                        <div class="rs-detail-value">{{ zone }}</div>
                    </li>
                    <li class="rs-detail-item">
                        <div class="rs-detail-key">Version</div>
                        <div class="rs-detail-value">{{ version }}</div>
                    </li>
                    <li class="rs-detail-item">
                        <div class="rs-detail-key">Service Type</div>
                        <div class="rs-detail-value">{{ service_type }}</div>
                    </li>
                </ul>
            </div>
        </div>
    {% endcall %}
{% endblock sidebar %}

{% block content_area_title %}
    Sign Up Complete
{% endblock content_area_title %}

{% block content_area_body %}
    <form action="/create_instance" method="POST" id="sign_up-form">

        <input type=hidden name="plan" value="{{ plan }}">
        <input type=hidden name="name" value="{{ name }}">
        <input type=hidden name="zone" value="{{ zone }}">
        <input type=hidden name="version" value="{{ version }}">
        <input type=hidden name="service_type" value="{{ service_type }}">

        {% if free_instance_count %}
            {% set status_message =
            'You are ready to create a {{ plan }}GB instance named {{ name }} in the {{ zone }} zone.' %}
            {{ status_indicator(status_message, 'ok') }}

            <div class="rs-control-group">
                <div class="rs-controls">
                    <a href="{{ url_for('sign_up.sign_up2') }}" class="rs-btn">Instance Information</a>
                    <button type="submit" class="rs-btn rs-btn-primary">Create Instance</button>
                </div>
            </div>
        {% else %}
            {% set status_message =
            '''Due to high demand we are not able to auto-provision a {{ plan }}GB instance in {{ zone }} at this time.
             A support issue has been logged and a support representative will contact you shortly to manually add your
            requested instance to your account.  Thanks for your patience.''' %}
            {{ status_indicator(status_message, 'error') }}

            <div class="rs-control-group">
                <div class="rs-controls">
                    <a href="{{ url_for('sign_up.sign_up2') }}" class="rs-btn">Instance Information</a>
                    <a href="/" class="btn btn-success">Login to UI</a>
                </div>
            </div>
        {% endif %}
    </form>
{% endblock content_area_body %}

{% block script %}
    {{ super() }}
    {% include 'google_analytics_js.html' %}
    {% include 'google_signup_conversion_js.html' %}
    {{ xg4ken_conversion(300, 'complete') }}
    {{ coremetrics_conversion("Signup4") }}
{% endblock script %}

